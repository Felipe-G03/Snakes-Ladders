{% extends "game/base.html" %}
{% block title %}Multiplayer — Lobby{% endblock %}
{% block content %}
  <section class="grid-2" style="display:grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
    <div class="card">
      <h2>Criar sala</h2>
      <p>Crie uma nova sala e configure antes de iniciar.</p>
      <form method="post" action="{% url 'game:multiplayer_create' %}" class="formulario">
        {% csrf_token %}
        <button class="btn btn-primario" type="submit">Criar sala</button>
      </form>
    </div>

    <div class="card">
      <h2>Entrar em sala</h2>
      <p>Digite o código da sala para entrar.</p>
      <form method="post" action="{% url 'game:multiplayer_join' %}" class="formulario">
        {% csrf_token %}
        <label class="campo">
          <span>Código</span>
          <input type="text" name="code" placeholder="ABC123" maxlength="8" required style="text-transform:uppercase;">
        </label>
        <button class="btn" type="submit">Entrar</button>
      </form>
    </div>
  </section>

  <section class="card" style="margin-top:1rem;">
    <h3>Salas Públicas (Lobby)</h3>
    <ul class="eventos">
      {% for r in public_rooms %}
        <li>
          <strong>{{ r.code }}</strong> — {{ r.board_size }} — host: {{ r.host.username }}
          <form method="post" action="{% url 'game:multiplayer_join' %}" style="display:inline;">
            {% csrf_token %}
            <input type="hidden" name="code" value="{{ r.code }}">
            <button class="btn">Entrar</button>
          </form>
        </li>
      {% empty %}
        <li class="muted">Nenhuma sala pública no momento.</li>
      {% endfor %}
    </ul>
  </section>

  <section class="card" style="margin-top:1rem;">
    <h3>Como funciona?</h3>
    <ul class="eventos">
      <li>Crie a sala, ajuste as configurações e convide amigos.</li>
      <li>Você pode tornar a sala pública para outros entrarem.</li>
      <li>Ao iniciar, todos veem o mesmo tabuleiro e jogam por turnos.</li>
    </ul>
  </section>
{% endblock %}
